{% extends "base.html" %}
{% block title %}TaggedByBelle{% endblock %}
{% block content %}
  <style>
    .hero { min-height: calc(100vh - 64px); display: grid; place-items: center; text-align: center; }
    .headline { font-size: clamp(2.5rem, 7vw, 5rem); line-height: 1.1; font-weight: 900; color: #fff; margin: 0; letter-spacing: -0.02em; }
    .sub { margin-top: 0.75rem; font-size: clamp(1rem, 2vw, 1.25rem); color: #cbd5e1; }
    .reviews { padding: 3rem 0; }
    .reviews h3 { color: #fff; font-size: 1.5rem; margin: 0 0 1rem 0; font-weight: 800; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1rem; }
    .card { background:#111827; border:1px solid #1f2937; border-radius:14px; padding:1rem; box-shadow:0 8px 25px rgba(0,0,0,.25); display:flex; gap:.65rem }
    .avatar { width:44px; height:44px; border-radius:50%; object-fit:cover; border:1px solid rgba(255,255,255,.25); background:#0b1020 }
    .rating { color:#fbbf24; font-size:1rem; }
    .pkg { color:#cbd5e1; font-weight:600 }
    .user { color:#e5e7eb; font-weight:700 }
    .meta { color:#94a3b8; font-size:.85rem }
    .comment { color:#9ca3af; font-size:.9rem; margin-top:.35rem }
    .empty { color:#94a3b8 }
  </style>
  <section class="hero">
    <div>
      <h1 class="headline">TaggedByBelle</h1>
      <p class="sub">make your beats unforgettable</p>
      {% if not request.session.get('is_admin') %}
        <a class="btn btn-primary" href="/order/new">Order</a>
      {% endif %}
      {% if request.session.get('is_admin') %}
        <a href="/packages" class="btn btn-primary">Package Details</a>
      {% endif %}

    </div>
  </section>
  {% if public_reviews %}
  <section class="reviews container">
    <h3>What producers say</h3>
    <div class="grid">
      {% for o in public_reviews %}
      <div class="card">
        {% if o.user and o.user.avatar %}
          <img class="avatar" src="{{ url_for('uploads', path=o.user.avatar) }}" alt="{{ o.user.username }}">
        {% else %}
          <div class="avatar" style="display:grid;place-items:center;color:#64748b">{{ o.user.username[0]|upper if o.user else '?' }}</div>
        {% endif %}
        <div>
          <div class="user">{{ o.user.username if o.user else 'User' }}</div>
          <div class="rating">{% for _ in range(o.review) %}★{% endfor %}{% for _ in range(5 - o.review) %}☆{% endfor %}</div>
          <div class="pkg">{{ o.package.name if o.package else 'Package' }}</div>
          <div class="meta">Order #{{ o.id }}</div>
          {% if o.review_text %}
          <div class="comment">“{{ o.review_text }}”</div>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  </section>
  {% else %}
  <section class="reviews container">
    <h3>What producers say</h3>
    <p class="empty">No reviews yet. Be the first to leave one!</p>
  </section>
  {% endif %}
{% endblock %}
